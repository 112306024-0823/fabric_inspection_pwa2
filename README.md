# ğŸ­ Fabric Inspection PWA2

åŸºæ–¼ **Quasar PWA + SQL Server** çš„ç¾ä»£åŒ–é©—å¸ƒç³»çµ±ï¼Œæ”¯æ´é›¢ç·šä½œæ¥­å’Œå³æ™‚è³‡æ–™åŒæ­¥ã€‚

![Vue](https://img.shields.io/badge/Vue-3.x-4FC08D?style=flat&logo=vue.js)
![TypeScript](https://img.shields.io/badge/TypeScript-5.x-3178C6?style=flat&logo=typescript)
![Quasar](https://img.shields.io/badge/Quasar-2.x-1976D2?style=flat&logo=quasar)
![SQL Server](https://img.shields.io/badge/SQL_Server-Microsoft-CC2927?style=flat&logo=microsoft-sql-server)
![PWA](https://img.shields.io/badge/PWA-Ready-5A0FC8?style=flat&logo=pwa)

## âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸ­ **å¸ƒæ²ç®¡ç†**: æ¢ç¢¼æƒæã€åŸºæœ¬è³‡è¨Šé¡¯ç¤ºã€ç‹€æ…‹è¿½è¹¤
- ğŸ” **æª¢é©—ä½œæ¥­**: è¦æ ¼æª¢æŸ¥ã€å“è³ªæª¢æŸ¥ã€ç¼ºé™·è¨˜éŒ„
- ğŸ“± **PWA åŠŸèƒ½**: é›¢ç·šä½œæ¥­ã€æœ¬åœ°å¿«å–ã€è‡ªå‹•åŒæ­¥
- âŒ¨ï¸ **å¹³æ¿å„ªåŒ–**: æ•¸å­—éµç›¤ã€è§¸æ§æ”¯æ´

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### ğŸ“± å‰ç«¯æ¶æ§‹
- **Quasar Framework**: Vue 3 + TypeScript + Vite
- **IndexedDB**: é›¢ç·šè³‡æ–™å„²å­˜ (Dexie.js)
- **Service Worker**: é›¢ç·šå¿«å–å’ŒèƒŒæ™¯åŒæ­¥
- **PWA**: å¯å®‰è£åˆ°æ¡Œé¢çš„ Web App

### ğŸ–¥ï¸ å¾Œç«¯æ¶æ§‹
- **Node.js Express**: RESTful API ä¼ºæœå™¨
- **SQL Server**: ä¼æ¥­ç´šè³‡æ–™åº«
- **mssql**: SQL Server é€£æ¥é©…å‹•
- **CORS**: è·¨åŸŸè«‹æ±‚æ”¯æ´

### ğŸ”„ é›¢ç·šå„ªå…ˆè¨­è¨ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ PWA      â”‚    â”‚   å¾Œç«¯ API      â”‚    â”‚   SQL Server    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ IndexedDB   â”‚ â”‚â—„â”€â”€â–ºâ”‚ â”‚ Express.js  â”‚ â”‚â—„â”€â”€â–ºâ”‚ â”‚ è³‡æ–™åº«      â”‚ â”‚
â”‚ â”‚ (Dexie.js)  â”‚ â”‚    â”‚ â”‚ REST API    â”‚ â”‚    â”‚ â”‚ rolls       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â”‚ inspections â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚                 â”‚    â”‚ â”‚ defects     â”‚ â”‚
â”‚ â”‚ Outbox      â”‚ â”‚    â”‚                 â”‚    â”‚ â”‚ defect_codesâ”‚ â”‚
â”‚ â”‚ (åŒæ­¥ä½‡åˆ—)   â”‚ â”‚    â”‚                 â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’¾ è³‡æ–™åŒæ­¥æ©Ÿåˆ¶
- **é›¢ç·šå„ªå…ˆ**: æ‰€æœ‰æ“ä½œå…ˆå¯«å…¥æœ¬åœ° IndexedDB
- **Outbox ä½‡åˆ—**: å¾…åŒæ­¥è³‡æ–™æš«å­˜æ©Ÿåˆ¶
- **é›™å‘åŒæ­¥**: Push (æ¨é€åˆ°ä¼ºæœå™¨) + Pull (å¾ä¼ºæœå™¨æ‹‰å–)
- **è¡çªè§£æ±º**: ä½¿ç”¨ `rowversion` å’Œ `_dirty` æ¨™è¨˜
- **è‡ªå‹•é‡è©¦**: ç¶²è·¯æ¢å¾©å¾Œè‡ªå‹•åŒæ­¥

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚
- Node.js 18+
- SQL Server é ç«¯é€£ç·š

### å®‰è£èˆ‡å•Ÿå‹•

1. **å®‰è£ä¾è³´**
```bash
npm install
cd backend && npm install
```

2. **é…ç½®ç’°å¢ƒè®Šæ•¸**

å»ºç«‹ `backend/.env`ï¼š
```env
PORT=3000
DB_SERVER=your-sql-server-ip
DB_PORT=your-sql-server-port
DB_NAME=your-database-name
DB_USER=your-username
DB_PASSWORD=your-password
DB_ENCRYPT=false
DB_TRUST_CERT=true
```

å»ºç«‹ `.env`ï¼ˆæ ¹ç›®éŒ„ï¼‰ï¼š
```env
VITE_API_BASE_URL=http://localhost:3000/api
```

3. **å•Ÿå‹•ç³»çµ±**

**æœ€ç°¡å–®çš„å•Ÿå‹•æ–¹å¼ï¼š**
```bash
# çµ‚ç«¯æ©Ÿ 1: å•Ÿå‹•å¾Œç«¯
cd backend
node server.js

# çµ‚ç«¯æ©Ÿ 2: å•Ÿå‹•å‰ç«¯
npx quasar dev -m pwa
```

## ğŸ“– ä½¿ç”¨æµç¨‹

1. **å¸ƒæ²æ¸…å–®**: è¼¸å…¥æ¢ç¢¼æœå°‹å¸ƒæ² â†’ æŸ¥çœ‹è³‡è¨Š â†’ é–‹å§‹æª¢é©—
2. **æª¢é©—ä½œæ¥­**: è¦æ ¼æª¢æŸ¥ â†’ å“è³ªæª¢æŸ¥ â†’ ç¼ºé™·è¨˜éŒ„ â†’ å®Œæˆæª¢é©—
3. **é›¢ç·šä½œæ¥­**: è‡ªå‹•å¿«å– â†’ é›¢ç·šæ“ä½œ â†’ ç¶²è·¯æ¢å¾©è‡ªå‹•åŒæ­¥

## ğŸ—ƒï¸ è³‡æ–™åº«çµæ§‹

- **`rolls`**: å¸ƒæ²åŸºæœ¬è³‡è¨Š
- **`inspections`**: æª¢é©—è¨˜éŒ„
- **`defects`**: ç¼ºé™·è¨˜éŒ„
- **`defect_codes`**: ç¼ºé™·ä»£ç¢¼
- **`sync_logs`**: åŒæ­¥è¨˜éŒ„

## ğŸ”§ æ•…éšœæ’é™¤

1. **å¾Œç«¯é€£ç·šå¤±æ•—**: æª¢æŸ¥ SQL Server é€£ç·šè¨­å®šå’Œé˜²ç«ç‰†
2. **å‰ç«¯ç©ºç™½é é¢**: ç¢ºèª `.env` æª”æ¡ˆä¸­çš„ `VITE_API_BASE_URL` è¨­å®š
3. **åŒæ­¥å¤±æ•—**: æª¢æŸ¥ç¶²è·¯é€£ç·šå’Œå¾Œç«¯ API ç‹€æ…‹
4. **å¹³æ¿è§¸æ§å•é¡Œ**: ç¢ºèª CSS åª’é«”æŸ¥è©¢è¨­å®š

## ğŸš€ éƒ¨ç½²

### PWA éƒ¨ç½²
```bash
npm run build
# éƒ¨ç½² dist/pwa ç›®éŒ„åˆ°éœæ…‹ç¶²ç«™è¨—ç®¡æœå‹™
```

### å¾Œç«¯éƒ¨ç½²
```bash
cd backend
npm install 
node server.js
# ä½¿ç”¨ PM2 æˆ– systemd ç®¡ç†ç¨‹åº
```

---

**ğŸ¯ æœ€ç°¡å–®çš„å•Ÿå‹•æ–¹å¼ï¼š**
```bash
# çµ‚ç«¯æ©Ÿ 1: å•Ÿå‹•å¾Œç«¯
cd backend
node server.js

# çµ‚ç«¯æ©Ÿ 2: å•Ÿå‹•å‰ç«¯
npx quasar dev -m pwa
```